<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">


</head>

<body>
  <div class="container" id="app">
    <div class="input-group mb-3">
      <input type="text" class="form-control" placeholder="Question" v-model="QuestionStr" @keydown.enter="selQuestion"
        aria-label="Question" aria-describedby="button-addon2">
      <button class="btn btn-outline-secondary" type="button" @click="selQuestion">送出</button>
    </div>
    <table class="table">
      <thead>
        <tr>
          <th width="50%" scope="col">Question</th>
          <th scope="col">Answer</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="(v , k) in QuestionArr">
          <td v-if=" v.Qdone " v-html="v.Qtext"></td>
          <td v-if=" v.Adone  " v-html="v.Atext"></td>
        </tr>
      </tbody>
    </table>
  </div>



  <script src="https://unpkg.com/vue@3"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
    crossorigin="anonymous"></script>
  <script>
    const { createApp, ref, reactive } = Vue
    createApp({
      setup() {
        const QuestionStr = ref('')
        const QuestionArr = reactive([])
        const selQuestion = () => {

          fetch('sel_question.php?q=' + QuestionStr.value, { method: 'GET' })
            .then(response => {
              if (!response.ok) throw new Error(response.statusText)
              return response.json()
            }).then(data => data.map(datas => {
              QuestionArr.push({ Qtext: datas.Qoutput, Qdone: datas.Qtype, Atext: datas.Aoutput, Adone: datas.Atype })
            }))
            .catch(function (err) {
              console.log(err.Message);
            })
          QuestionArr.length = 0
        }
        return {
          QuestionArr, selQuestion, QuestionStr
        }
      }
    }).mount('#app')
  </script>
</body>

</html>l